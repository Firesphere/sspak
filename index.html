<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8"> 
		<title>SSPak</title>
		<style type="text/css">
		* {
			font-family: Helvetica, Arial;
		}
		body {
			max-width: 1100px;
			margin: auto;
		}
		h1 {
			font-size: 72px;
			margin: 48px 0 24px 0;
			padding: 0;
		}
		h2 {
			font-size: 24px;
			margin: 24px 0 24px 0;
			padding: 0;
		}
		p, li {
			font-size: 16px;
			line-height: 24px;
		}
		pre, code, pre *, code * {
			font-family: Courier, Courier New;
			font-size: 16px;
			line-height: 24px;
		}
		pre {
			padding: 10px;
			background-color: #333;
			color: #CCC;
			border: 1px #777 solid;
		}
		pre.big, pre.big * {
			font-size: 24px;
			border-width: 5px;
			cursor: pointer;
		}
		pre .copy-instruction {
			margin-top: 10px;
			margin-left: 43px;
			font-size: 16px;
			font-family: Helvetica, Arial;
		}
		</style>
	</head>

	<body>
		<h1>SSPak</h1>
		<p>SSPak is a database and asset bundling tool for SilverStripe.</p>

		<h2>Linux and OSX</h2>

		<h3>Installation method 1: Script</h3>
	
		<p>Use the install script, where the final argument is the directory where the binary will be installed to.</p>

		<pre>curl -sS http://silverstripe.github.io/sspak/install | php -- /usr/local/bin</pre>

		<p>If the final argument is omitted, the script will be installed into the current directory. If you don't have permission to write to the directory, "sudo" will be used to escalate permissions.</p>

		<h3>Installation method 2: Direct download</h3>

		<p>If you prefer not to use the installer, you can <a href="sspak.phar">download the script</a> and copy it to your executable path:</p>

		<pre>chmod +x sspak.phar
sudo mv sspak.phar /usr/local/bin/sspak</pre>

		<h3>Usage</h3>

		<p>You should now be able to invoke sspak and see the help message:</p>

		<pre>sspak
SSPak: manage SilverStripe .sspak archives.
...</pre>

		<p>To load an sspak onto your environment (watch out, assets and db will be wiped out!):</p>

		<pre>sspak load /path/to/downloaded/file.sspak /path/to/my/local/site</pre>

		<p>To create a new sspak:</p>

		<pre>sspak save /path/to/my/local/site /path/to/resulting/file.sspak</pre>

		<p>That should do the trick, assuming your SilverStripe installation is working correctly. If it doesn't, have a look at "saveexisting" and "extract" commands instead.</p>

		<h2>Windows</h2>

		<p>Unfortunately sspak is not supported on Windows at this time. However it is possible to access and create sspak archives manually using freely available tools. You will be able to work with it by either using <b>msysgit bash</b> and <b>Cygwin</b>, or by using GUI tools such as <b>7-zip</b>.</p>

		<p>See "Manual access" below for further details.</p>

		<!--
		<p>We assume here the program will be installed to "c:\bin" and that your path environment variable is set up to point to this directory.<p>
		
		<p>On Windows 8 the path can be set by: pressing Windows-SysRq, clicking
		"Advanced system settings", then "Environment Variables...", then modifying the "Path" entry under "System variables". Refer to Google for instructions for your specific system.</p>
		
		<h3>Method 1: msysgit bash</h3>

		<p>Open your git bash and double check your PATH variable contains both your php directory and "/c/bin":</p>
		<pre>echo $PATH</pre>

		<p>Download sspak.phar to "/C/bin" and make it executable:</p>
		<pre>cd /C/bin
php -r "readfile('http://silverstripe.github.io/sspak/sspak.phar');" &gt; sspak
chmod a+x sspak</pre>

		<p>Note: You can also <a href="sspak.phar">download the sspak.phar</a> directly and move it to desired location by hand. Don't forget to rename it to "sspak" and give it execution permission.

		<h3>Method 2: cmd.exe</h3>

		<p>Open your terminal and double check your Path variable contains both your php directory and "c:\bin":</p>
		<pre>echo %Path%</pre>

		<p>Download sspak.phar to "c:\bin" and make it executable by creating a bat file:</p>

		<pre>cd c:\bin
php -r "readfile('http://silverstripe.github.io/sspak/sspak.phar');" %*&gt;sspak.phar
echo @php "%~dp0sspak.phar" %*&gt;sspak.bat</pre>

		<p>Note: You can also <a href="sspak.phar">download the sspak.phar</a> directly and move it to desired location by hand. You will still need to create the bat file.</p>

		<h2>Usage</h2>

		<p>You should now be able to display sspak help by simply calling:</p>
		<pre>sspak</pre>

		-->

		<h2>Manual access</h2>

		"sspak" format relies on tar and gzip, so it's possible to access and create archives by hand.

		<h3>"sspak" structure</h3>

		<ul>
			<li>"your-archive.sspak", can be unpacked using tar and gz ("tgz" / "tar.gz" equivalent). It contains:
				<ul>
					<li>"assets.tar.gz", contains tar+gzipped "assets" directory (including the "assets" directory)</li>
					<li>"database.sql.gz", contains gzipped SQL dump of the database</li>
				</ul>
			</li>
		</ul>

		<h3>Accessing existing archive</h3>

		<p>In the terminal (or terminal emulator) do the following:</p>

		<pre>tar xzf your-archive.sspak
gunzip database.sql.gz
tar xzf assets.tar.gz</pre>

		<p>This will result in a "database.sql" dump and "assets" directory.</p>

		<h3>Creating a new archive</h3>

		<p>In the terminal (or terminal emulator) do the following:</p>

		<pre>tar czf assets.tar.gz assets
gzip database.sql
tar cf your-archive.sspak assets.tar.gz database.sql.gz</pre>

		<p>"your-archive.sspak" is now ready for submission.</p>

		<h2>Further information</h2>

		<p>For further information, please <a href="http://github.com/silverstripe/sspak/">visit the GitHub page</a>.</p>
	</body>
</html>
